import{a as g,d as m,e as l,g as P,h as I,k as C}from"./chunk-MNFGMNYS.mjs";import{a as T}from"./chunk-HQ4DGB7L.mjs";import{a as d}from"./chunk-Y5RQOXZH.mjs";import{a as y}from"./chunk-PZ5JKQSP.mjs";import{b as p}from"./chunk-UR5E2UDO.mjs";import{a as r}from"./chunk-7B3VSBCX.mjs";import{b as f}from"./chunk-VMCFN5CT.mjs";import{b as A}from"./chunk-KR5JAN32.mjs";async function S(n){let a=await b(n);return h(n,a)}async function b(n){let{aptosConfig:a,data:t}=n,e,o;return"bytecode"in t?(e=t,o=await g(e)):"multisigAddress"in t?(e={aptosConfig:a,multisigAddress:t.multisigAddress,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments},o=await g(e)):(e={aptosConfig:a,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments},o=await g(e)),o}async function h(n,a){let{aptosConfig:t,sender:e,options:o}=n,i;if(x(n)&&(i=p.ZERO.toString()),D(n)){let{secondarySignerAddresses:s}=n;return m({aptosConfig:t,sender:e,payload:a,options:o,secondarySignerAddresses:s,feePayerAddress:i})}return m({aptosConfig:t,sender:e,payload:a,options:o,feePayerAddress:i})}function x(n){return n.withFeePayer===!0}function D(n){return"secondarySignerAddresses"in n}function j(n){let{transaction:a}=n;return C(a)}function G(n){return P({...n})}async function J(n){let{aptosConfig:a,transaction:t,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:s}=n,c=l({transaction:t,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:s}),{data:u}=await A({aptosConfig:a,body:c,path:"transactions/simulate",params:{estimate_gas_unit_price:n.options?.estimateGasUnitPrice??!1,estimate_max_gas_amount:n.options?.estimateMaxGasAmount??!1,estimate_prioritized_gas_unit_price:n.options?.estimatePrioritizedGasUnitPrice??!1},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return u}async function _(n){let{aptosConfig:a}=n,t=I({...n}),{data:e}=await A({aptosConfig:a,body:t,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return e}async function U(n){let{aptosConfig:a,signer:t,transaction:e}=n,o=G({signer:t,transaction:e});return _({aptosConfig:a,transaction:e,senderAuthenticator:o})}async function L(n){let{aptosConfig:a,account:t,metadataBytes:e,moduleBytecode:o,options:i}=n,s=o.map(u=>r.U8(u));return await S({aptosConfig:a,sender:p.from(t),data:{function:"0x1::code::publish_package_txn",functionArguments:[r.U8(e),new r(s)]},options:i})}async function Q(n){let{aptosConfig:a,fromAccount:t,toNewPrivateKey:e}=n,o=await d({aptosConfig:a,accountAddress:t.accountAddress}),i=y.fromPrivateKey({privateKey:e,legacy:!0}),c=new T({sequenceNumber:BigInt(o.sequence_number),originator:t.accountAddress,currentAuthKey:p.from(o.authentication_key),newPublicKey:i.publicKey}).bcsToBytes(),u=t.sign(c),w=i.sign(c),R=await S({aptosConfig:a,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new f(t.signingScheme.valueOf()),r.U8(t.publicKey.toUint8Array()),new f(i.signingScheme.valueOf()),r.U8(i.publicKey.toUint8Array()),r.U8(u.toUint8Array()),r.U8(w.toUint8Array())]}});return await U({aptosConfig:a,signer:t,transaction:R})}export{S as a,b,h as c,j as d,G as e,J as f,_ as g,U as h,L as i,Q as j};
//# sourceMappingURL=chunk-7IY2Y73Q.mjs.map